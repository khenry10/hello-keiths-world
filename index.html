<!DOCTYPE html>
<html>
<head>
  <title> Keith's Map </title>
  <script src='https://api.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
  <link rel="stylesheet" href="style.css" >
  <link rel="icon" href="images/favicon.png">
<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
</head>
  <body>
    <div class="navigation">
      <h1>Hello Keith's World</h1>
      <button onclick="tour()"> Tour </button>
      <button onclick="eastCoastZoom()">East Coast Zoom </button>
      <button onclick="usZoom()">US Zoom </button>
    </div>

    <div id='map' style='width: 100%; height: 89vh;'></div>
    <script>
      mapboxgl.accessToken = 'pk.eyJ1Ijoia2VpdGhoZW5yeSIsImEiOiJjaWpleHg0OXcwMDBxdTRtNXh2bzJ1M2RuIn0.pRRgOiRIeWX5MeHFz8Be3g';

      //instatiates the map, with the starting center coordaintes and zoom
      var map = new mapboxgl.Map({
          container: 'map',
          style: 'mapbox://styles/mapbox/streets-v8',
          center: [-99.046506, 37.477170],
          zoom: 3.8
      });

      //geoJSON markers
      map.on('load', function () {
          map.addSource("markers", {
              "type": "geojson",
              "data": {
                  "type": "FeatureCollection",
                  "features": [{
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-77.038832, 38.905287]
                      },
                      "properties": {
                          "title": "Socrata",
                          "description": "<div class=\"marker-title\"><b>Socrata</b> - leader in the open data space, In-Q-Tel funded start-up building a platform to help government and government agencies publish data. </div><p><li> October 2014 - February 2016</p><p> Loved the mission of making government data more broadly accessible to everyone.</b>  Had a range of Public Sector customers, from Montgomery County to NASA.</p><p> Still felt the Developers were doing all the fun stuff, so I took the Part-time Back End Web Dev course at General Assembly.</p><p>  I loved it but realized I would have to dedicate a lot more time to become a developer. </p>",
                          "marker-symbol": "marker"
                      }
                  }, {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-77.034117, 38.904839]
                      },
                      "properties": {
                          "title": "General Assembly",
                          "description": "<div class=\"marker-title\"><b>General Assembly's Web Dev Immersive</b></div><p><li> February 2016 - April 2016 </p><p> An intense full time 12-week coding bootcamp where I learned Ruby, RoR, JavaScript, OOP, libraries/frameworks like jQuery, Anuglar, Express.</p><p>  It was challenging and rewarding.  The best payoffs always came after overcoming a hard struggle, which is why I rarely asked for instructor help. </p><p> I approach coding the same way as when going for a heavy lift;  I tell my spotter 'let me struggle, don't touch the bar. You'll know when I need help'.</p>",
                          "marker-symbol": "marker"
                      }
                  }, {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-73.985126, 40.753794]

                      },
                      "properties": {
                          "title": "Yahoo",
                          "description": "<div class=\"marker-title\"><b>Yahoo Inc.</b></div><p><li> January 2010 - October 2011</p><p> After the Fall Harvest ended I came back East.</p><p>  Utlimately I got job offers at Yahoo and Merril Lynch.  Wall Street seemed lame compared to what was happening in Tech, so I became a Yahoo and never looked back!</p><p> In my role I supported our Canadian business and worked with the top ad agencies in Toronto, who represented Fortune 500 brands.</p><p> The bureaucracy and limitations of what I could work on were some of the disadvantages of being at a large corporation. </p><p> I was so starved to be more impactful that I would be the one who emailed when the CEO would say during all-hands meetings 'email me directly'.  He responded too :D </p>",
                          "marker-symbol": "marker"
                      }
                  }, {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-74.777883, 39.854799]
                      },
                      "properties": {
                          "title": "Shawnee HS",
                          "description": "<div class=\"marker-title\"><b>Shawnee High School</b></div><p><li> Graduated June 2005 </p><p> All-American lacrosse player my Junior year.  No judgement on being a lacrosse player please!  </p><p>Typically the first thing people say after I tell them is 'You don't seem like a lacrosse player'.</p><p>  I also challanged myself academically so I was nerd according to my teammates and a jock compared to my classmates.</p>",
                          "marker-symbol": "marker"
                      }
                  }, {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-73.596210, 40.715599]
                      },
                      "properties": {
                          "title": "Hofstra U",
                          "description": "<div class=\"marker-title\"><b>Hofstra University</b></div><p><li> Graduated May 2009</li> </p><p> Spent the majority of time playing lacrosse and going class while I majored in finance.</p><p>  If I could go back I would major in computer science and minor economics.</p>",
                          "marker-symbol": "marker"
                      }
                  }, {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-121.898533, 39.181551]

                      },
                      "properties": {
                          "title": "Oak Acre Farms",
                          "description": "<div class=\"marker-title\"><b>Mapbox</b></div><p><li> Fall 2009 </p><p> With the economy in the toilet, I decided to head West and help out on my buddies farm.</p><p> We did a little bit of everything from cleaning the orchards, picking fruit, boxing fruit on the assembly line, to any other odd jobs that needed to be done.</p><p> After work was over we would fish at the creek that bordered the property, shoot skeet, and sometiems head to the buffet at the casino.</p><p> On weekends we would drive to San Francisco to sell at a local farmers market and enjoy the city (mostly eat burritos and party).</p>",
                          "marker-symbol": "marker"
                          }
                      },  {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-77.032558, 38.913184]
                      },
                      "properties": {
                          "title": "Mapbox",
                          "description": "<div class=\"marker-title\"><b>Mapbox</b></div><p><li> Spring 2016</p><p> The Front End Developer on the Labs team is exactly the type of position I'm looking for.</p><p>  The best role for me is one where I can dive in, have a positive impact while working with a bunch of different teams, customers, and even partners. </p><p> </p>",
                          "marker-symbol": "marker"
                          }
                      }, {
                      "type": "Feature",
                      "geometry": {
                          "type": "Point",
                          "coordinates": [-73.986601, 40.754421]
                      },
                      "properties": {
                          "title": "MediaMath",
                          "description": "<div class=\"marker-title\"><b>MediaMath</b></div><p><li> October 2011 - October 2014</p><p> This was the perfect job for me after feeling caged at Yahoo.  I had the freedom and autonomy to pursue a lot of passion projects, in addition to my day-to-day role.  </p><p> 100th hire and left as the company was hitting 500.  I had a bunch of different roles and got exposure to all sides of the business.</p><p> Did a lot of favors which made me a go-to guy for the COO, he put me on special projects knowing I had chips to cash in and would get the job done.</p><p> Ultimately became a Product Manager designing Private Exchanges, a $20 million business line.</p><p> Loved being a Product Manager but felt handicapped not knowing the coding aspect.  I also wanted to work on something that I was more passionate about.</p>",
                          "marker-symbol": "marker"

                      }

                  }]
              }
          });

          map.addLayer({
              "id": "markers",
              "type": "symbol",
              "source": "markers",
              "layout": {
                  "icon-image": "{marker-symbol}-15",
                  "text-field": "{title}",
                  "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
                  "text-offset": [0, -2],
                  "text-anchor": "top"

              }
          });
      });

      // adds zoom-in and zoom-out buttons
      map.addControl(new  mapboxgl.Navigation())

      // adds iffy that gives us access to a markerts coordinates when you click on it
      map.on('click', function (e) {
        var features = map.queryRenderedFeatures(e.point, { layers: ['markers'] });
        if (!features.length) {
          return;
        }

        var feature = features[0];

        var popup = new mapboxgl.Popup()
        .setLngLat(feature.geometry.coordinates)
        .setHTML(feature.properties.description)
        .addTo(map);

        var fly = function(){
          // 1st conditional is to to see if the market selected is Yahoo.  If yes, bearing is set to 30 to aline nicely with Manhattan's grid system
          if(feature.properties.title === "Yahoo" || feature.properties.title === "MediaMath"){
            markerFly(feature.geometry.coordinates, 15.5, 0.4, 30)

            // 2nd conditional is looking for Hofstra, adds bearing to align with the turnpike
          } else if (feature.properties.title === "Hofstra U") {
              markerFly(feature.geometry.coordinates, 16.5, 0.4, -25)
              } else {
                console.log("else" + feature.geometry.coordinates[0])
                markerFly(feature.geometry.coordinates, 14.5, 0.4, 0)
                }
        }
        fly()
      });

    // conencted to East Coast Zoom button to show from DC to NYC
    var eastCoastZoom = function(){
      markerFly([-75.237519, 40.000987], 6.94, .5, 0)
    };

    // function connected to US Zoom button
    var usZoom = function(){
      markerFly([-99.046506, 37.477170], 3.8, .5, 0)
    }

    // function to guide a user chronogically through the places I've lived
    var tour = function(){
      //to shawnee
        markerFly([-74.777883, 39.854799], 16.5, 0.4, 0)

      //to hofstra
      setTimeout(function() {
        markerFly([-73.596210, 40.715599], 16.5, 0.4, -25)
      },10550)

      // to cali
      setTimeout(function() {
        markerFly([-121.898533, 39.181551], 16.5, 0.3, 0)
      },25000);

      //to Yahoo
      setTimeout(function() {
        markerFly([-73.985126, 40.753794], 16.5, 0.4, 30)
      },50500);

      // to MediaMath
      setTimeout(function() {
        markerFly([-73.986601, 40.754421], 16.5, 0.1, 30)
      },70500);

      //to Socrata
      setTimeout(function() {
        markerFly([-77.038832, 38.905287], 16.5, 0.4, 0)
      },80000);

      //to general Assembly
      setTimeout(function() {
        markerFly([-77.034117, 38.904839], 16.5, 0.2, 0)
      },99000);

      //to Mapbox
      setTimeout(function() {
        markerFly([-77.032558, 38.913184], 16.5, 0.2, 0)
      },100500);
    };

    var markerFly = function(coordinates, zoomNum, speedNum, bearingNum){
      map.flyTo({
        center: coordinates,
        zoom: zoomNum,
        speed: speedNum,
        bearing: bearingNum
      })
    };
    </script>
  </body>
</html>
